<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='how to merge answer collected by different coders (merge rows) how to add new variables in a dataset by matching the ID (add/merge columns) how to manually add observation (one single respondent) in an existing dataframe (add a row)  1. merge Before import the excel data files, make sure the name of the variables are exactly the same in all data files, e.g. one var named Rank in file A, while the corresponding var in file B is named Ranking.'><title>GEB2405 Online Lecture 4 - Merge data collected by different interviewers</title>

<link rel='canonical' href='https://chen-gary.github.io/p/geb2405-online-lecture-4-merge-data-collected-by-different-interviewers/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='GEB2405 Online Lecture 4 - Merge data collected by different interviewers'>
<meta property='og:description' content='how to merge answer collected by different coders (merge rows) how to add new variables in a dataset by matching the ID (add/merge columns) how to manually add observation (one single respondent) in an existing dataframe (add a row)  1. merge Before import the excel data files, make sure the name of the variables are exactly the same in all data files, e.g. one var named Rank in file A, while the corresponding var in file B is named Ranking.'>
<meta property='og:url' content='https://chen-gary.github.io/p/geb2405-online-lecture-4-merge-data-collected-by-different-interviewers/'>
<meta property='og:site_name' content='Gary&#39;s Tech Station'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='R' /><meta property='article:published_time' content='2021-03-02T14:11:04&#43;08:00'/><meta property='article:modified_time' content='2021-03-02T14:11:04&#43;08:00'/>
<meta name="twitter:title" content="GEB2405 Online Lecture 4 - Merge data collected by different interviewers">
<meta name="twitter:description" content="how to merge answer collected by different coders (merge rows) how to add new variables in a dataset by matching the ID (add/merge columns) how to manually add observation (one single respondent) in an existing dataframe (add a row)  1. merge Before import the excel data files, make sure the name of the variables are exactly the same in all data files, e.g. one var named Rank in file A, while the corresponding var in file B is named Ranking.">
    </head>
    <body class="">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.body.dataset.scheme = 'dark';
        } else {
            document.body.dataset.scheme = 'light';
        }
    })();
</script><div class="container main-container flex on-phone--column extended article-page with-toolbar">
            <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/avatar_1_hu12df5dfcdf876fd5b13bd9ab3e1d416f_66145_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
                    <span class="emoji">ðŸŒ </span>
                
            </figure>
        
        <h1 class="site-name"><a href="https://chen-gary.github.io/">Gary&#39;s Tech Station</a></h1>
        <h2 class="site-description">Computer language design is just like a stroll in the park. Jurassic Park, that is. --Larry Wall</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/repo'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-git-fork" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <circle cx="12" cy="18" r="2" />
  <circle cx="7" cy="6" r="2" />
  <circle cx="17" cy="6" r="2" />
  <path d="M7 8v2a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2v-2" />
  <line x1="12" y1="12" x2="12" y2="16" />
</svg>
                
                <span>Repo</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>Dark Mode</span>
            </li>
        

        
        
        

    </ol>
</aside>

            <main class="main full-width">
    <div id="article-toolbar">
        <a href="https://chen-gary.github.io/" class="back-home">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



            <span>Back</span>
        </a>
    </div>

    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/geb2405/" style="background-color: #2a9d8f; color: #fff;">
                GEB2405
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/geb2405-online-lecture-4-merge-data-collected-by-different-interviewers/">GEB2405 Online Lecture 4 - Merge data collected by different interviewers</a>
    </h2>

    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">Mar 02, 2021</time>
    </footer></div>
</header>

    <section class="article-content">
    <ul>
<li>how to merge answer collected by different coders <strong>(merge rows)</strong></li>
<li>how to add new variables in a dataset by matching the ID <strong>(add/merge columns)</strong></li>
<li>how to manually add observation (one single respondent) in an existing dataframe <strong>(add a row)</strong></li>
</ul>
<h2 id="1-merge">1. merge</h2>
<p>Before import the excel data files, make sure the name of the variables are exactly the same in all data files, e.g. one var named <code>Rank</code> in file A, while the corresponding var in file B is named <code>Ranking</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># solution 1</span>

<span class="c1"># create new var</span>
<span class="n">Survey_GE_class_choice_2</span><span class="o">$</span><span class="n">Rank</span> <span class="o">&lt;-</span> <span class="n">Survey_GE_class_choice_2</span><span class="o">$</span><span class="n">Ranking</span>
<span class="c1"># delete the improperly named variable</span>
<span class="n">Survey_GE_class_choice_2</span> <span class="o">&lt;-</span> <span class="n">Survey_GE_class_choice_2</span> <span class="n">[</span><span class="p">,</span><span class="m">-7</span><span class="n">]</span>
<span class="c1"># bind the two dataset</span>
<span class="n">cuhksz_GE_choice</span> <span class="o">&lt;-</span> <span class="nf">rbind</span><span class="p">(</span><span class="n">Survey_GE_class_choice_1</span><span class="p">,</span> <span class="n">Survey_GE_class_choice_2</span><span class="p">)</span>
</code></pre></div><p><code>rbind</code>:</p>
<p>the two dataframe should have the same variables, but they do not have to be in the same order</p>
<p>&mdash;&ndash;&gt; if it is not the case:</p>
<ul>
<li>
<p>delete the extra var in one dataframe</p>
</li>
<li>
<p>add the extra var in another dataframe with <code>NA</code></p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="n">df</span><span class="o">$</span><span class="n">new_var</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
</code></pre></div></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="n">name_of_the_new_dataframe</span> <span class="o">&lt;-</span> <span class="nf">rbind</span><span class="p">(</span><span class="n">dataframeA</span><span class="p">,</span> <span class="n">dataframeB</span><span class="p">)</span>

<span class="n">cuhksz_student_health</span><span class="o">&lt;-</span><span class="nf">rbind</span><span class="p">(</span><span class="n">SSE_students_data</span><span class="p">,</span><span class="n">SME_students_data</span><span class="p">)</span>
</code></pre></div><h2 id="2-add-new-variables-addmerge-a-column">2. add new variables (add/merge a column)</h2>
<p>Before merging we need to make sure we can find a way to match the information correctly.</p>
<p>In <code>CUHKSZ_employment_survey-1.xls</code> and <code>CUHKSZ_employment_survey-1b.xls</code>, the <code>ID</code> is unique to each respondent and correspond in the two dataframe.</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="n">name_of_the_new_dataframe</span> <span class="o">&lt;-</span> <span class="nf">merge</span><span class="p">(</span><span class="n">dataframeA</span><span class="p">,</span> <span class="n">dataframeB</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s">&#34;variable to identify respondent&#34;</span><span class="p">)</span>

<span class="n">CUHK_employement_1</span><span class="o">&lt;-</span><span class="nf">merge</span><span class="p">(</span><span class="n">CUHKSZ_employment_survey_1</span><span class="p">,</span><span class="n">CUHKSZ_employment_survey_1b</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s">&#34;ID&#34;</span><span class="p">)</span>
</code></pre></div><h2 id="3-add-observation-one-single-respondent-in-an-existing-dataframe-add-a-row">3. add observation (one single respondent) in an existing dataframe (add a row)</h2>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="nf">fix</span><span class="p">(</span><span class="n">dataframe_name</span><span class="p">)</span>
</code></pre></div><p>click + arrow</p>
<p>double click &mdash;-&gt; access already input data</p>
<hr>
<h1 id="tutorial-4">Tutorial 4</h1>
<p>Exercise3 Q3: Create a new variable displaying how many kinds of coffee each student drink during the week</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Arithmetic transformation in Tutorial 1!!!</span>
<span class="n">test</span><span class="o">$</span><span class="n">total</span> <span class="o">&lt;-</span> <span class="n">test</span><span class="o">$</span><span class="n">Cappuccin</span> <span class="o">+</span> <span class="n">test</span><span class="o">$</span><span class="n">CafeLatte</span> <span class="o">+</span> <span class="n">test</span><span class="o">$</span><span class="n">Americano</span> <span class="o">+</span> <span class="n">test</span><span class="o">$</span><span class="n">Expresso</span>
</code></pre></div><p>Exercise3 Q4: Create a new variable indicating the different combination of coffee drunk by the students (ex: Americano only, Americano and Capuccinoâ€¦.etc)</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="n">df</span><span class="o">$</span><span class="n">newFactor</span> <span class="o">&lt;-</span> <span class="nf">with</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nf">interaction</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">factorA</span><span class="p">,</span> <span class="n">df</span><span class="o">$</span><span class="n">factorB</span><span class="p">,</span> <span class="n">df</span><span class="o">$</span><span class="n">factorC</span><span class="p">))</span>
</code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/r/">R</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>2021 All Rights Reserved</span>
    </section>
    </footer>

    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/p/geb2405-online-lecture-6-ggplot2-ii-two-variables/">
        
        

        <div class="article-details">
            <h2 class="article-title">GEB2405 Online Lecture 6 - ggplot2 II (Two variables)</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/geb2405-online-lecture-5-ggplot2-i-one-variable/">
        
        

        <div class="article-details">
            <h2 class="article-title">GEB2405 Online Lecture 5 - ggplot2 I (One Variable)</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/geb2405-online-lecture-3-clean-the-data-before-analysis/">
        
        

        <div class="article-details">
            <h2 class="article-title">GEB2405 Online Lecture 3 - Clean the data before analysis</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/geb2405-online-lecture-2/">
        
        

        <div class="article-details">
            <h2 class="article-title">GEB2405 Online Lecture 2</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/geb2405-online-lecture-1/">
        
        

        <div class="article-details">
            <h2 class="article-title">GEB2405 Online Lecture 1</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>


    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2021 Gary&#39;s Tech Station
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="2.0.1">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
            </main>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"
    integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous"></script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
